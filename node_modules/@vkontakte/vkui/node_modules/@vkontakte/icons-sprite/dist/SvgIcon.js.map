{"version":3,"sources":["../src/SvgIcon.tsx"],"sourcesContent":["import * as React from 'react';\nimport { BrowserSymbol } from './browser-symbol';\nimport { addSpriteSymbol, useIsomorphicLayoutEffect } from './sprite';\nimport { warnOnce } from './warnOnce';\n\nexport interface SvgIconProps extends React.SVGProps<SVGSVGElement> {\n  width?: number;\n  height?: number;\n  getRootRef?: React.Ref<SVGSVGElement>;\n  title?: string;\n  /**\n   * @ignore\n   */\n  iconId?: string;\n}\n\nconst SvgIcon = ({\n  width = 0,\n  height = 0,\n  display = 'block',\n  'aria-hidden': ariaHidden = true,\n  iconId,\n  className,\n  fill,\n  getRootRef,\n  'style': propsStyle,\n  title,\n  children,\n  ...restProps\n}: SvgIconProps) => {\n  const child = React.Children.toArray(children)[0];\n  const hasIconChildren =\n    React.isValidElement(child) && typeof child.type === 'function' && 'mountIcon' in child.type;\n\n  const size = Math.max(width, height);\n\n  const style = {\n    width,\n    height,\n    ...propsStyle,\n  };\n\n  return (\n    <svg\n      aria-hidden={ariaHidden}\n      display={display}\n      className={[\n        'vkuiIcon',\n        `vkuiIcon--${size}`,\n        `vkuiIcon--w-${width}`,\n        `vkuiIcon--h-${height}`,\n        `vkuiIcon--${iconId}`,\n        className,\n      ]\n        .join(' ')\n        .trim()}\n      width={width}\n      height={height}\n      style={style}\n      ref={getRootRef}\n      {...restProps}\n    >\n      {title && <title>{title}</title>}\n      {hasIconChildren && children}\n      <use xlinkHref={`#${iconId}`} style={{ fill: 'currentColor', color: fill }}>\n        {!hasIconChildren && children}\n      </use>\n    </svg>\n  );\n};\n\nexport function makeIcon<Props extends SvgIconProps = SvgIconProps, Subcomponents = {}>(\n  componentName: string,\n  iconId: string,\n  viewBox: string,\n  content: string,\n  width: number,\n  height: number,\n  deprecated?: boolean,\n  replacement?: string,\n  attrs?: Record<string, string>,\n): React.FC<Props> & Subcomponents {\n  let isMounted = false;\n  function mountIcon() {\n    if (!isMounted) {\n      addSpriteSymbol(new BrowserSymbol({ content }));\n      isMounted = true;\n    }\n  }\n\n  const warn = warnOnce(componentName);\n  const Icon = (props: Props) => {\n    useIsomorphicLayoutEffect(mountIcon, []);\n\n    if (deprecated) {\n      const replacementNotice = replacement ? `. Замените на ${replacement}` : '';\n\n      warn('Иконка устарела' + replacementNotice);\n    }\n\n    return (\n      <SvgIcon\n        {...attrs}\n        viewBox={viewBox}\n        iconId={iconId}\n        {...props}\n        width={props.width !== undefined && !isNaN(props.width) ? +props.width : width}\n        height={props.height !== undefined && !isNaN(props.height) ? +props.height : height}\n      />\n    );\n  };\n\n  Icon.mountIcon = mountIcon;\n  Icon.displayName = componentName;\n\n  return Icon as any;\n}\n"],"names":["React","BrowserSymbol","addSpriteSymbol","useIsomorphicLayoutEffect","warnOnce","SvgIcon","width","height","display","ariaHidden","iconId","className","fill","getRootRef","propsStyle","title","children","restProps","child","Children","toArray","hasIconChildren","isValidElement","type","size","Math","max","style","svg","aria-hidden","join","trim","ref","use","xlinkHref","color","makeIcon","componentName","viewBox","content","deprecated","replacement","attrs","isMounted","mountIcon","warn","Icon","props","replacementNotice","undefined","isNaN","displayName"],"mappings":";;;AAAA,YAAYA,WAAW,QAAQ;AAC/B,SAASC,aAAa,QAAQ,mBAAmB;AACjD,SAASC,eAAe,EAAEC,yBAAyB,QAAQ,WAAW;AACtE,SAASC,QAAQ,QAAQ,aAAa;AAOpC;;GAEC,GAIH,IAAMC,UAAU;8BACdC,OAAAA,kCAAQ,yCACRC,QAAAA,oCAAS,2CACTC,SAAAA,sCAAU,0BACKC,aAAf,gBAAeA,aAAAA,iBAAa,OAAbA,KACfC,gBAAAA,QACAC,mBAAAA,WACAC,cAAAA,MACAC,oBAAAA,YACA,AAASC,oBAAT,UACAC,eAAAA,OACAC,kBAAAA,UACGC;QAXHX;QACAC;QACAC;QACA;QACAE;QACAC;QACAC;QACAC;QACA;QACAE;QACAC;;IAGA,IAAME,QAAQlB,MAAMmB,QAAQ,CAACC,OAAO,CAACJ,SAAS,CAAC,EAAE;IACjD,IAAMK,gCACJrB,MAAMsB,cAAc,CAACJ,UAAU,OAAOA,MAAMK,IAAI,KAAK,cAAc,eAAeL,MAAMK,IAAI;IAE9F,IAAMC,OAAOC,KAAKC,GAAG,CAACpB,OAAOC;IAE7B,IAAMoB,QAAQ;QACZrB,OAAAA;QACAC,QAAAA;OACGO;IAGL,qBACE,oBAACc;QACCC,eAAapB;QACbD,SAASA;QACTG,WAAW;YACT;YACC,aAAiB,OAALa;YACZ,eAAoB,OAANlB;YACd,eAAqB,OAAPC;YACd,aAAmB,OAAPG;YACbC;SACD,CACEmB,IAAI,CAAC,KACLC,IAAI;QACPzB,OAAOA;QACPC,QAAQA;QACRoB,OAAOA;QACPK,KAAKnB;OACDI,YAEHF,uBAAS,oBAACA,eAAOA,QACjBM,mBAAmBL,wBACpB,oBAACiB;QAAIC,WAAW,AAAC,IAAU,OAAPxB;QAAUiB,OAAO;YAAEf,MAAM;YAAgBuB,OAAOvB;QAAK;OACtE,CAACS,mBAAmBL;AAI7B;AAEA,OAAO,SAASoB,SACdC,aAAqB,EACrB3B,MAAc,EACd4B,OAAe,EACfC,OAAe,EACfjC,KAAa,EACbC,MAAc,EACdiC,UAAoB,EACpBC,WAAoB,EACpBC,KAA8B;IAE9B,IAAIC,YAAY;IAChB,SAASC;QACP,IAAI,CAACD,WAAW;YACdzC,gBAAgB,IAAID,cAAc;gBAAEsC,SAAAA;YAAQ;YAC5CI,YAAY;QACd;IACF;IAEA,IAAME,OAAOzC,SAASiC;IACtB,IAAMS,OAAO,SAACC;QACZ5C,0BAA0ByC,WAAW,EAAE;QAEvC,IAAIJ,YAAY;YACd,IAAMQ,oBAAoBP,cAAc,AAAC,iBAA4B,OAAZA,eAAgB;YAEzEI,KAAK,oBAAoBG;QAC3B;QAEA,qBACE,oBAAC3C,qFACKqC;YACJJ,SAASA;YACT5B,QAAQA;YACJqC;YACJzC,OAAOyC,MAAMzC,KAAK,KAAK2C,aAAa,CAACC,MAAMH,MAAMzC,KAAK,IAAI,CAACyC,MAAMzC,KAAK,GAAGA;YACzEC,QAAQwC,MAAMxC,MAAM,KAAK0C,aAAa,CAACC,MAAMH,MAAMxC,MAAM,IAAI,CAACwC,MAAMxC,MAAM,GAAGA;;IAGnF;IAEAuC,KAAKF,SAAS,GAAGA;IACjBE,KAAKK,WAAW,GAAGd;IAEnB,OAAOS;AACT"}