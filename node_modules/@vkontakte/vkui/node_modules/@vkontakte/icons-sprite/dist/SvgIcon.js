import { _ as _object_spread } from "@swc/helpers/_/_object_spread";
import { _ as _object_spread_props } from "@swc/helpers/_/_object_spread_props";
import { _ as _object_without_properties } from "@swc/helpers/_/_object_without_properties";
import * as React from 'react';
import { BrowserSymbol } from './browser-symbol';
import { addSpriteSymbol, useIsomorphicLayoutEffect } from './sprite';
import { warnOnce } from './warnOnce';
/**
   * @ignore
   */ var SvgIcon = function(_param) {
    var _param_width = _param.width, width = _param_width === void 0 ? 0 : _param_width, _param_height = _param.height, height = _param_height === void 0 ? 0 : _param_height, _param_display = _param.display, display = _param_display === void 0 ? 'block' : _param_display, tmp = _param['aria-hidden'], ariaHidden = tmp === void 0 ? true : tmp, iconId = _param.iconId, className = _param.className, fill = _param.fill, getRootRef = _param.getRootRef, propsStyle = _param['style'], title = _param.title, children = _param.children, restProps = _object_without_properties(_param, [
        "width",
        "height",
        "display",
        'aria-hidden',
        "iconId",
        "className",
        "fill",
        "getRootRef",
        'style',
        "title",
        "children"
    ]);
    var child = React.Children.toArray(children)[0];
    var hasIconChildren = /*#__PURE__*/ React.isValidElement(child) && typeof child.type === 'function' && 'mountIcon' in child.type;
    var size = Math.max(width, height);
    var style = _object_spread({
        width: width,
        height: height
    }, propsStyle);
    return /*#__PURE__*/ React.createElement("svg", _object_spread({
        "aria-hidden": ariaHidden,
        display: display,
        className: [
            'vkuiIcon',
            "vkuiIcon--".concat(size),
            "vkuiIcon--w-".concat(width),
            "vkuiIcon--h-".concat(height),
            "vkuiIcon--".concat(iconId),
            className
        ].join(' ').trim(),
        width: width,
        height: height,
        style: style,
        ref: getRootRef
    }, restProps), title && /*#__PURE__*/ React.createElement("title", null, title), hasIconChildren && children, /*#__PURE__*/ React.createElement("use", {
        xlinkHref: "#".concat(iconId),
        style: {
            fill: 'currentColor',
            color: fill
        }
    }, !hasIconChildren && children));
};
export function makeIcon(componentName, iconId, viewBox, content, width, height, deprecated, replacement, attrs) {
    var isMounted = false;
    function mountIcon() {
        if (!isMounted) {
            addSpriteSymbol(new BrowserSymbol({
                content: content
            }));
            isMounted = true;
        }
    }
    var warn = warnOnce(componentName);
    var Icon = function(props) {
        useIsomorphicLayoutEffect(mountIcon, []);
        if (deprecated) {
            var replacementNotice = replacement ? ". Замените на ".concat(replacement) : '';
            warn('Иконка устарела' + replacementNotice);
        }
        return /*#__PURE__*/ React.createElement(SvgIcon, _object_spread_props(_object_spread(_object_spread_props(_object_spread({}, attrs), {
            viewBox: viewBox,
            iconId: iconId
        }), props), {
            width: props.width !== undefined && !isNaN(props.width) ? +props.width : width,
            height: props.height !== undefined && !isNaN(props.height) ? +props.height : height
        }));
    };
    Icon.mountIcon = mountIcon;
    Icon.displayName = componentName;
    return Icon;
}

//# sourceMappingURL=SvgIcon.js.map