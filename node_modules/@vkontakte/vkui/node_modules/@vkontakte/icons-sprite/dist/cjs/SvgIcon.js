"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "makeIcon", {
    enumerable: true,
    get: function() {
        return makeIcon;
    }
});
var _interop_require_wildcard = require("@swc/helpers/_/_interop_require_wildcard");
var _object_spread = require("@swc/helpers/_/_object_spread");
var _object_spread_props = require("@swc/helpers/_/_object_spread_props");
var _object_without_properties = require("@swc/helpers/_/_object_without_properties");
var _react = /*#__PURE__*/ _interop_require_wildcard._(require("react"));
var _browsersymbol = require("./browser-symbol");
var _sprite = require("./sprite");
var _warnOnce = require("./warnOnce");
/**
   * @ignore
   */ var SvgIcon = function(_param) {
    var _param_width = _param.width, width = _param_width === void 0 ? 0 : _param_width, _param_height = _param.height, height = _param_height === void 0 ? 0 : _param_height, _param_display = _param.display, display = _param_display === void 0 ? 'block' : _param_display, tmp = _param['aria-hidden'], ariaHidden = tmp === void 0 ? true : tmp, iconId = _param.iconId, className = _param.className, fill = _param.fill, getRootRef = _param.getRootRef, propsStyle = _param['style'], title = _param.title, children = _param.children, restProps = _object_without_properties._(_param, [
        "width",
        "height",
        "display",
        'aria-hidden',
        "iconId",
        "className",
        "fill",
        "getRootRef",
        'style',
        "title",
        "children"
    ]);
    var child = _react.Children.toArray(children)[0];
    var hasIconChildren = /*#__PURE__*/ _react.isValidElement(child) && typeof child.type === 'function' && 'mountIcon' in child.type;
    var size = Math.max(width, height);
    var style = _object_spread._({
        width: width,
        height: height
    }, propsStyle);
    return /*#__PURE__*/ _react.createElement("svg", _object_spread._({
        "aria-hidden": ariaHidden,
        display: display,
        className: [
            'vkuiIcon',
            "vkuiIcon--".concat(size),
            "vkuiIcon--w-".concat(width),
            "vkuiIcon--h-".concat(height),
            "vkuiIcon--".concat(iconId),
            className
        ].join(' ').trim(),
        width: width,
        height: height,
        style: style,
        ref: getRootRef
    }, restProps), title && /*#__PURE__*/ _react.createElement("title", null, title), hasIconChildren && children, /*#__PURE__*/ _react.createElement("use", {
        xlinkHref: "#".concat(iconId),
        style: {
            fill: 'currentColor',
            color: fill
        }
    }, !hasIconChildren && children));
};
function makeIcon(componentName, iconId, viewBox, content, width, height, deprecated, replacement, attrs) {
    var isMounted = false;
    function mountIcon() {
        if (!isMounted) {
            (0, _sprite.addSpriteSymbol)(new _browsersymbol.BrowserSymbol({
                content: content
            }));
            isMounted = true;
        }
    }
    var warn = (0, _warnOnce.warnOnce)(componentName);
    var Icon = function(props) {
        (0, _sprite.useIsomorphicLayoutEffect)(mountIcon, []);
        if (deprecated) {
            var replacementNotice = replacement ? ". Замените на ".concat(replacement) : '';
            warn('Иконка устарела' + replacementNotice);
        }
        return /*#__PURE__*/ _react.createElement(SvgIcon, _object_spread_props._(_object_spread._(_object_spread_props._(_object_spread._({}, attrs), {
            viewBox: viewBox,
            iconId: iconId
        }), props), {
            width: props.width !== undefined && !isNaN(props.width) ? +props.width : width,
            height: props.height !== undefined && !isNaN(props.height) ? +props.height : height
        }));
    };
    Icon.mountIcon = mountIcon;
    Icon.displayName = componentName;
    return Icon;
}

//# sourceMappingURL=SvgIcon.js.map